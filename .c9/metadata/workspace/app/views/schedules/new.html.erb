{"filter":false,"title":"new.html.erb","tooltip":"/app/views/schedules/new.html.erb","undoManager":{"mark":36,"position":36,"stack":[[{"group":"doc","deltas":[{"start":{"row":4,"column":0},"end":{"row":166,"column":9},"action":"remove","lines":["<div style=\"margin:15px;\" horizontal wrap layout around-justified>","    <div>","        <% (@remaining_credits.reject{|k,v| v > 0 }).each do |k, v| %>","            <div layout horizontal center-justified>","                <table style=\"margin:30px;\" layout horizontal center-justified>","                    <tr><th colspan=\"4\" style=\"text-align:center;\"><%= CurriculumCategory.find(k).category + \" - \" %>Completed</th></tr>","                    <tr><th></th><th>Class</th><th>Credits</th><th>Grade</th></tr>","                    <% @common_courses[k].each do |course| %>","                        <tr height=\"40\">","                          <td style=\"text-align: left;width: 30px;height: 40px;\" layout vertical center-justified><core-icon icon=\"check\"></core-icon></td>","                          <td style=\"padding-right:10px;width:150px;\"><%= course.subject + course.course.to_s + \": \" + course.title %></td>","                          <td style=\"text-align:center;\"><%= course.credits %></td>","                          <td style=\"text-align:center;\">A</td>","                        </tr>","                    <% end %>","                </table>","            </div>","        <% end %>","    </div>","","    <div>","        <% @new_category_courses.each do |k, v| %>","            <div layout horizontal center-justified>","                <table style=\"margin:30px;\" layout horizontal center-justified>","                    <tr><th colspan=\"7\" style=\"text-align:center;\"><%= CurriculumCategory.find(k).category + \" - \" %><%= @remaining_credits[k].to_s + \" credits remaining\" %></th></tr>","                    <tr><th></th><th>Class</th><th>Credits</th><th>Days</th><th>Time</th><th>Instructor</th><th>Grade</th></tr>","                    <% v.each do |offering| %>","                        <tr height=\"40\">","                          <td style=\"text-align: left;width: 30px;height: 40px;\" layout vertical center-justified><paper-checkbox class=\"offering_checkbox\" id=<%= offering.id.to_s %> ></paper-checkbox></td>","                          <td class=\"new_schedule_course_td\" style=\"padding-right:10px;width:150px;\"><%= offering.course.subject + offering.course.course.to_s + \": \" + offering.course.title %></td>","                          <td class=\"new_schedule_credit_td\" style=\"text-align:center;\"><%= offering.course.credits %></td>","                          <td class=\"new_schedule_days_td\" style=\"text-align:center;\"><%= offering.days_time.days %></td>","                          <td class=\"new_schedule_times_td\" style=\"text-align:center;\"><%= offering.days_time.start_time + \" - \" + offering.days_time.end_time %></td>","                          <td style=\"text-align:center;\"><%= offering.user.email[0..-10].capitalize %></td>","                          <td style=\"text-align:center;\">NC</td>","                        </tr>","                    <% end %>","                    <% @common_courses[k].each do |course| %>","                        <tr height=\"40\">","                          <td style=\"text-align: left;width: 30px;height: 40px;\" layout vertical center-justified><core-icon icon=\"check\"></core-icon></td>","                          <td style=\"padding-right:10px;width:150px;\"><%= course.subject + course.course.to_s + \": \" + course.title %></td>","                          <td style=\"text-align:center;\"><%= course.credits %></td>","                          <td style=\"text-align:center;\"></td>","                          <td style=\"text-align:center;\"></td>","                          <td style=\"text-align:center;\"></td>","                          <td style=\"text-align:center;\"><%= Transcript.where(course_id: course.id, user_id: @user.id).take.grade %></td>","                        </tr>","                    <% end %>","                </table>","            </div>","        <% end %>","        ","        <%= form_for [@user, @schedule], remote: true do |f| %>","            <% offerings = (@new_category_courses.values.flatten.map { |offering| [offering.id, offering.id] }) %>","            <%= f.select(:offering_id, options_for_select(offerings), {}, { id:'schedule_new_actual_select', multiple: true, style: \"font-family: 'RobotoDraft', sans-serif;width:100%;\", size: 6, hidden: \"\"}) %>","            <%= f.submit \"Update Schedule\", id: \"submit_schedule_changes\", hidden: \"\"%>","        <% end %>","        ","        <div id=\"schedule_errors\" style=\"font-size:0.75em;color:#d34336;\"></div>","    </div>","</div>","","<!--check ones already signed up for-->","<script>","<% @schedules.each do |sch| %>","    document.getElementById(\"schedule_new_actual_select\").options[$(\"#schedule_new_actual_select option[value=\" + \"<%= sch.id %>\" + \"]\").index()].selected = true;","    document.getElementById(\"<%= sch.id %>\").setAttribute(\"checked\", \"\");","<% end %>","$(\"#drawer_core_menu\")[0].selected = 4;","","var asel_opts, credit_count, disable, nsel_dates_array, nsel_opts, sel_dates_array, sel_opts;","","sel_opts = [];","","nsel_opts = [];","","asel_opts = [];","","credit_count = 0;","","sel_dates_array = [];","","nsel_dates_array = [];","","disable = [];","","$(\"#schedule_new_actual_select option:selected\").each(function() {","  sel_opts.push($(this).attr(\"value\"));","  asel_opts.push($(this).attr(\"value\"));","});","","$(\"#schedule_new_actual_select option:not(:selected)\").each(function() {","  nsel_opts.push($(this).attr(\"value\"));","  asel_opts.push($(this).attr(\"value\"));","});","","$.each(sel_opts, function(index, value) {","  var d, t;","  t = $(\"#\" + value).parent().parent();","  credit_count += parseInt(t.find(\".new_schedule_credit_td\").text());","  d = [t.find(\".new_schedule_days_td\").text(), t.find(\".new_schedule_times_td\").text().split(\" - \")[0], t.find(\".new_schedule_times_td\").text().split(\" - \")[1], t.find(\".new_schedule_course_td\").text()];","  if (d[1].split(\" \")[1] === \"pm\") {","    d[1] = new Date(2000, 1, 1, d[1].split(\":\")[0], d[1].split(\":\")[1].split(\" \")[0]);","    d[1].setHours(d[1].getHours() + 12);","  } else {","    d[1] = new Date(2000, 1, 1, d[1].split(\":\")[0], d[1].split(\":\")[1].split(\" \")[0]);","  }","  if (d[2].split(\" \")[1] === \"pm\") {","    d[2] = new Date(2000, 1, 1, d[2].split(\":\")[0], d[2].split(\":\")[1].split(\" \")[0]);","    d[2].setHours(d[2].getHours() + 12);","  } else {","    d[2] = new Date(2000, 1, 1, d[2].split(\":\")[0], d[2].split(\":\")[1].split(\" \")[0]);","  }","  sel_dates_array.push(d);","});","","$.each(nsel_opts, function(index, value) {","  var d, t;","  t = $(\"#\" + value).parent().parent();","  if ((credit_count + parseInt(t.find(\".new_schedule_credit_td\").text())) > 18) {","    disable.push(value);","  }","  d = [t.find(\".new_schedule_days_td\").text(), t.find(\".new_schedule_times_td\").text().split(\" - \")[0], t.find(\".new_schedule_times_td\").text().split(\" - \")[1], t.find(\".new_schedule_course_td\").text()];","  if (d[1].split(\" \")[1] === \"pm\") {","    d[1] = new Date(2000, 1, 1, d[1].split(\":\")[0], d[1].split(\":\")[1].split(\" \")[0]);","    d[1].setHours(d[1].getHours() + 12);","  } else {","    d[1] = new Date(2000, 1, 1, d[1].split(\":\")[0], d[1].split(\":\")[1].split(\" \")[0]);","  }","  if (d[2].split(\" \")[1] === \"pm\") {","    d[2] = new Date(2000, 1, 1, d[2].split(\":\")[0], d[2].split(\":\")[1].split(\" \")[0]);","    d[2].setHours(d[2].getHours() + 12);","  } else {","    d[2] = new Date(2000, 1, 1, d[2].split(\":\")[0], d[2].split(\":\")[1].split(\" \")[0]);","  }","  nsel_dates_array.push(d);","});","","$.each(nsel_opts, function(index1, value1) {","  $.each(sel_opts, function(index2, value2) {","    if (sel_dates_array[index2][0] === nsel_dates_array[index1][0]) {","      if ((sel_dates_array[index2][1] <= nsel_dates_array[index1][2]) && (nsel_dates_array[index1][1] <= sel_dates_array[index2][2])) {","        disable.push(value1);","      }","    }","    if (sel_dates_array[index2][3] === nsel_dates_array[index1][3]) {","      disable.push(value1);","    }","  });","});","","disable = jQuery.unique(disable);","","asel_opts = $(asel_opts).not(disable).get();","","$.each(disable, function(index, value) {","  $(\"#\" + value).attr(\"disabled\", \"\");","});","","$.each(asel_opts, function(index, value) {","  $(\"#\" + value).removeAttr(\"disabled\", \"\");","});","</script>"]},{"start":{"row":4,"column":0},"end":{"row":4,"column":1},"action":"insert","lines":["<"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":1},"end":{"row":4,"column":2},"action":"insert","lines":["%"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":2},"end":{"row":4,"column":3},"action":"insert","lines":["="]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":3},"end":{"row":4,"column":4},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":4},"end":{"row":4,"column":5},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":5},"end":{"row":4,"column":6},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":6},"end":{"row":4,"column":7},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":7},"end":{"row":4,"column":8},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":8},"end":{"row":4,"column":9},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":9},"end":{"row":4,"column":10},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":10},"end":{"row":4,"column":11},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":11},"end":{"row":4,"column":13},"action":"insert","lines":["\"\""]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":12},"end":{"row":4,"column":13},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":13},"end":{"row":4,"column":14},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":14},"end":{"row":4,"column":15},"action":"insert","lines":["w"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":16},"end":{"row":4,"column":17},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":17},"end":{"row":4,"column":18},"action":"insert","lines":["%"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":18},"end":{"row":4,"column":19},"action":"insert","lines":[">"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":19},"end":{"row":5,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":5,"column":0},"end":{"row":6,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":6,"column":0},"end":{"row":6,"column":1},"action":"insert","lines":["<"]}]}],[{"group":"doc","deltas":[{"start":{"row":6,"column":1},"end":{"row":6,"column":2},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":6,"column":2},"end":{"row":6,"column":3},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":6,"column":3},"end":{"row":6,"column":4},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":6,"column":4},"end":{"row":6,"column":5},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":6,"column":5},"end":{"row":6,"column":6},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":6,"column":6},"end":{"row":6,"column":7},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":6,"column":7},"end":{"row":6,"column":17},"action":"insert","lines":["></script>"]}]}],[{"group":"doc","deltas":[{"start":{"row":6,"column":8},"end":{"row":6,"column":9},"action":"insert","lines":["<"]}]}],[{"group":"doc","deltas":[{"start":{"row":6,"column":8},"end":{"row":6,"column":9},"action":"remove","lines":["<"]}]}],[{"group":"doc","deltas":[{"start":{"row":6,"column":8},"end":{"row":8,"column":0},"action":"insert","lines":["","    ",""]}]}],[{"group":"doc","deltas":[{"start":{"row":7,"column":4},"end":{"row":7,"column":41},"action":"insert","lines":["$(\"#drawer_core_menu\")[0].selected= 2"]}]}],[{"group":"doc","deltas":[{"start":{"row":7,"column":40},"end":{"row":7,"column":41},"action":"remove","lines":["2"]}]}],[{"group":"doc","deltas":[{"start":{"row":7,"column":40},"end":{"row":7,"column":41},"action":"insert","lines":["4"]}]}],[{"group":"doc","deltas":[{"start":{"row":7,"column":41},"end":{"row":7,"column":42},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":7,"column":40},"end":{"row":7,"column":41},"action":"remove","lines":["4"]}]}],[{"group":"doc","deltas":[{"start":{"row":7,"column":40},"end":{"row":7,"column":41},"action":"insert","lines":["2"]}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":8,"column":9},"end":{"row":8,"column":9},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1421026180970,"hash":"9ebb0c44b489cbe723221a348381878e279fa3ef"}