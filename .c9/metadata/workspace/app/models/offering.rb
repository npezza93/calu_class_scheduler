{"filter":false,"title":"offering.rb","tooltip":"/app/models/offering.rb","undoManager":{"mark":100,"position":100,"stack":[[{"group":"doc","deltas":[{"start":{"row":92,"column":67},"end":{"row":92,"column":68},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":92,"column":68},"end":{"row":92,"column":69},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":92,"column":69},"end":{"row":92,"column":70},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":92,"column":70},"end":{"row":92,"column":71},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":92,"column":71},"end":{"row":92,"column":72},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":92,"column":72},"end":{"row":92,"column":73},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":92,"column":73},"end":{"row":92,"column":74},"action":"insert","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":92,"column":73},"end":{"row":92,"column":74},"action":"remove","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":92,"column":73},"end":{"row":92,"column":74},"action":"insert","lines":[":"]}]}],[{"group":"doc","deltas":[{"start":{"row":92,"column":74},"end":{"row":92,"column":75},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":92,"column":75},"end":{"row":92,"column":76},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":92,"column":76},"end":{"row":92,"column":77},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":92,"column":77},"end":{"row":92,"column":78},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":92,"column":78},"end":{"row":92,"column":79},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":92,"column":79},"end":{"row":92,"column":80},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":92,"column":80},"end":{"row":92,"column":81},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":92,"column":81},"end":{"row":92,"column":82},"action":"insert","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":92,"column":82},"end":{"row":92,"column":83},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":80,"column":17},"end":{"row":80,"column":18},"action":"remove","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":80,"column":17},"end":{"row":80,"column":18},"action":"remove","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":80,"column":16},"end":{"row":80,"column":17},"action":"remove","lines":["_"]}]}],[{"group":"doc","deltas":[{"start":{"row":80,"column":116},"end":{"row":80,"column":118},"action":"remove","lines":["id"]}]}],[{"group":"doc","deltas":[{"start":{"row":80,"column":115},"end":{"row":80,"column":116},"action":"remove","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":93,"column":0},"end":{"row":94,"column":0},"action":"remove","lines":["            o.course_id    = course_id",""]}]}],[{"group":"doc","deltas":[{"start":{"row":93,"column":0},"end":{"row":94,"column":0},"action":"remove","lines":["            o.days_time_id = day_time_id",""]}]}],[{"group":"doc","deltas":[{"start":{"row":92,"column":83},"end":{"row":92,"column":84},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":92,"column":84},"end":{"row":92,"column":85},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":92,"column":85},"end":{"row":92,"column":86},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":92,"column":86},"end":{"row":92,"column":87},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":92,"column":87},"end":{"row":92,"column":88},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":92,"column":88},"end":{"row":92,"column":89},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":92,"column":89},"end":{"row":92,"column":90},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":92,"column":90},"end":{"row":92,"column":91},"action":"insert","lines":[":"]}]}],[{"group":"doc","deltas":[{"start":{"row":92,"column":91},"end":{"row":92,"column":92},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":92,"column":92},"end":{"row":92,"column":93},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":92,"column":93},"end":{"row":92,"column":94},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":92,"column":94},"end":{"row":92,"column":95},"action":"insert","lines":["w"]}]}],[{"group":"doc","deltas":[{"start":{"row":92,"column":95},"end":{"row":92,"column":97},"action":"insert","lines":["[]"]}]}],[{"group":"doc","deltas":[{"start":{"row":92,"column":96},"end":{"row":92,"column":97},"action":"insert","lines":["2"]}]}],[{"group":"doc","deltas":[{"start":{"row":93,"column":0},"end":{"row":94,"column":13},"action":"remove","lines":["            o.section      = row[2]","          end"]}]}],[{"group":"doc","deltas":[{"start":{"row":92,"column":30},"end":{"row":92,"column":33},"action":"remove","lines":["new"]},{"start":{"row":92,"column":30},"end":{"row":92,"column":31},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":92,"column":31},"end":{"row":92,"column":32},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":92,"column":32},"end":{"row":92,"column":33},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":92,"column":33},"end":{"row":92,"column":34},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":92,"column":34},"end":{"row":92,"column":35},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":92,"column":35},"end":{"row":92,"column":36},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":95,"column":0},"end":{"row":96,"column":10},"action":"remove","lines":["          total << [offering.user.email, offering.course.subject + offering.course.course.to_s, offering.days_time.days, offering.section, offering.valid?]","          "]}]}],[{"group":"doc","deltas":[{"start":{"row":94,"column":2},"end":{"row":95,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":94,"column":0},"end":{"row":94,"column":2},"action":"remove","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":93,"column":0},"end":{"row":94,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":75,"column":0},"end":{"row":76,"column":0},"action":"remove","lines":["total = []",""]}]}],[{"group":"doc","deltas":[{"start":{"row":96,"column":0},"end":{"row":100,"column":9},"action":"remove","lines":["      ","      total.each do |row|","        print row","        print \"\\n\"","      end"]}]}],[{"group":"doc","deltas":[{"start":{"row":95,"column":10},"end":{"row":96,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":91,"column":101},"end":{"row":91,"column":102},"action":"insert","lines":[")"]}]}],[{"group":"doc","deltas":[{"start":{"row":75,"column":0},"end":{"row":75,"column":2},"action":"remove","lines":["  "]},{"start":{"row":76,"column":0},"end":{"row":76,"column":2},"action":"remove","lines":["  "]},{"start":{"row":77,"column":0},"end":{"row":77,"column":2},"action":"remove","lines":["  "]},{"start":{"row":78,"column":0},"end":{"row":78,"column":2},"action":"remove","lines":["  "]},{"start":{"row":79,"column":0},"end":{"row":79,"column":2},"action":"remove","lines":["  "]},{"start":{"row":80,"column":0},"end":{"row":80,"column":2},"action":"remove","lines":["  "]},{"start":{"row":81,"column":0},"end":{"row":81,"column":2},"action":"remove","lines":["  "]},{"start":{"row":82,"column":0},"end":{"row":82,"column":2},"action":"remove","lines":["  "]},{"start":{"row":83,"column":0},"end":{"row":83,"column":2},"action":"remove","lines":["  "]},{"start":{"row":84,"column":0},"end":{"row":84,"column":2},"action":"remove","lines":["  "]},{"start":{"row":85,"column":0},"end":{"row":85,"column":2},"action":"remove","lines":["  "]},{"start":{"row":86,"column":0},"end":{"row":86,"column":2},"action":"remove","lines":["  "]},{"start":{"row":87,"column":0},"end":{"row":87,"column":2},"action":"remove","lines":["  "]},{"start":{"row":88,"column":0},"end":{"row":88,"column":2},"action":"remove","lines":["  "]},{"start":{"row":89,"column":0},"end":{"row":89,"column":2},"action":"remove","lines":["  "]},{"start":{"row":90,"column":0},"end":{"row":90,"column":2},"action":"remove","lines":["  "]},{"start":{"row":91,"column":0},"end":{"row":91,"column":2},"action":"remove","lines":["  "]},{"start":{"row":93,"column":0},"end":{"row":93,"column":2},"action":"remove","lines":["  "]},{"start":{"row":94,"column":0},"end":{"row":94,"column":2},"action":"remove","lines":["  "]},{"start":{"row":95,"column":0},"end":{"row":95,"column":2},"action":"remove","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":75,"column":0},"end":{"row":75,"column":2},"action":"remove","lines":["  "]},{"start":{"row":76,"column":0},"end":{"row":76,"column":2},"action":"remove","lines":["  "]},{"start":{"row":77,"column":0},"end":{"row":77,"column":2},"action":"remove","lines":["  "]},{"start":{"row":78,"column":0},"end":{"row":78,"column":2},"action":"remove","lines":["  "]},{"start":{"row":79,"column":0},"end":{"row":79,"column":2},"action":"remove","lines":["  "]},{"start":{"row":80,"column":0},"end":{"row":80,"column":2},"action":"remove","lines":["  "]},{"start":{"row":81,"column":0},"end":{"row":81,"column":2},"action":"remove","lines":["  "]},{"start":{"row":82,"column":0},"end":{"row":82,"column":2},"action":"remove","lines":["  "]},{"start":{"row":83,"column":0},"end":{"row":83,"column":2},"action":"remove","lines":["  "]},{"start":{"row":84,"column":0},"end":{"row":84,"column":2},"action":"remove","lines":["  "]},{"start":{"row":85,"column":0},"end":{"row":85,"column":2},"action":"remove","lines":["  "]},{"start":{"row":86,"column":0},"end":{"row":86,"column":2},"action":"remove","lines":["  "]},{"start":{"row":87,"column":0},"end":{"row":87,"column":2},"action":"remove","lines":["  "]},{"start":{"row":88,"column":0},"end":{"row":88,"column":2},"action":"remove","lines":["  "]},{"start":{"row":89,"column":0},"end":{"row":89,"column":2},"action":"remove","lines":["  "]},{"start":{"row":90,"column":0},"end":{"row":90,"column":2},"action":"remove","lines":["  "]},{"start":{"row":91,"column":0},"end":{"row":91,"column":2},"action":"remove","lines":["  "]},{"start":{"row":93,"column":0},"end":{"row":93,"column":2},"action":"remove","lines":["  "]},{"start":{"row":94,"column":0},"end":{"row":94,"column":2},"action":"remove","lines":["  "]},{"start":{"row":95,"column":0},"end":{"row":95,"column":2},"action":"remove","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":75,"column":0},"end":{"row":75,"column":2},"action":"remove","lines":["  "]},{"start":{"row":76,"column":0},"end":{"row":76,"column":2},"action":"remove","lines":["  "]},{"start":{"row":77,"column":0},"end":{"row":77,"column":2},"action":"remove","lines":["  "]},{"start":{"row":78,"column":0},"end":{"row":78,"column":2},"action":"remove","lines":["  "]},{"start":{"row":79,"column":0},"end":{"row":79,"column":2},"action":"remove","lines":["  "]},{"start":{"row":80,"column":0},"end":{"row":80,"column":2},"action":"remove","lines":["  "]},{"start":{"row":81,"column":0},"end":{"row":81,"column":2},"action":"remove","lines":["  "]},{"start":{"row":82,"column":0},"end":{"row":82,"column":2},"action":"remove","lines":["  "]},{"start":{"row":83,"column":0},"end":{"row":83,"column":2},"action":"remove","lines":["  "]},{"start":{"row":84,"column":0},"end":{"row":84,"column":2},"action":"remove","lines":["  "]},{"start":{"row":85,"column":0},"end":{"row":85,"column":2},"action":"remove","lines":["  "]},{"start":{"row":86,"column":0},"end":{"row":86,"column":2},"action":"remove","lines":["  "]},{"start":{"row":87,"column":0},"end":{"row":87,"column":2},"action":"remove","lines":["  "]},{"start":{"row":88,"column":0},"end":{"row":88,"column":2},"action":"remove","lines":["  "]},{"start":{"row":89,"column":0},"end":{"row":89,"column":2},"action":"remove","lines":["  "]},{"start":{"row":90,"column":0},"end":{"row":90,"column":2},"action":"remove","lines":["  "]},{"start":{"row":91,"column":0},"end":{"row":91,"column":2},"action":"remove","lines":["  "]},{"start":{"row":93,"column":0},"end":{"row":93,"column":2},"action":"remove","lines":["  "]},{"start":{"row":94,"column":0},"end":{"row":94,"column":2},"action":"remove","lines":["  "]},{"start":{"row":95,"column":0},"end":{"row":95,"column":2},"action":"remove","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":39,"column":4},"end":{"row":39,"column":6},"action":"insert","lines":["# "]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":35},"end":{"row":4,"column":38},"action":"remove","lines":["and"]},{"start":{"row":4,"column":35},"end":{"row":4,"column":36},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":36},"end":{"row":4,"column":37},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":36},"end":{"row":4,"column":37},"action":"remove","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":36},"end":{"row":4,"column":37},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":38},"end":{"row":4,"column":39},"action":"remove","lines":["("]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":113},"end":{"row":4,"column":114},"action":"remove","lines":[")"]}]}],[{"group":"doc","deltas":[{"start":{"row":42,"column":6},"end":{"row":67,"column":10},"action":"remove","lines":["CSV.foreach(file.path) do |row|","        course_id = prof_id = day_time_id = nil","        ","        begin","          course_id = Course.where(\"subject = ? AND course = ?\",row[1].split()[0].upcase, row[1].split()[1].to_i).take.id","          prof_id = User.where(\"email = ?\", row[12].split()[0][0..-2].downcase + '@calu.edu').take.id","          if row[7].blank?","            if row[2][0].upcase == \"W\"","              day_time_id = DaysTime.where(\"days = ?\", \"ONLINE\").take.id","            elsif row[2][0].upcase == \"X\"","              day_time_id = DaysTime.where(\"days = ?\", \"OFFSITE\").take.id","            end","          else","            day_time_id = DaysTime.where(\"days = ? AND start_time = ? and end_time = ? \", row[7].upcase, Time.strptime(row[8], \"%I%M%P\").strftime(\"%l:%M %P\").strip, Time.strptime(row[9], \"%I%M%P\").strftime(\"%l:%M %P\").strip).take.id","          end","          ","          offering = Offering.new do |o|","            o.user_id      = prof_id","            o.course_id    = course_id","            o.days_time_id = day_time_id","            o.section      = row[2]","          end","          offering.save","        rescue","        end","      end "]},{"start":{"row":42,"column":6},"end":{"row":62,"column":4},"action":"insert","lines":["CSV.foreach(\"Schedul.csv\") do |row|","  course_id = prof_id = day_time_id = offering = nil","  ","  begin","    course = Course.where(\"subject = ? AND course = ?\",row[1].split()[0].upcase, row[1].split()[1].to_i).take","    prof = User.where(\"email = ?\", row[12].split()[0][0..-2].downcase + '@calu.edu').take","    if row[7].blank?","      if row[2][0].upcase == \"W\"","        day_time = DaysTime.where(\"days = ?\", \"ONLINE\").take","      elsif row[2][0].upcase == \"X\"","        day_time = DaysTime.where(\"days = ?\", \"OFFSITE\").take","      end","    else","      day_time = DaysTime.where(\"days = ? AND start_time = ? and end_time = ? \", row[7].upcase, Time.strptime(row[8], \"%I%M%P\").strftime(\"%l:%M %P\").strip, Time.strptime(row[9], \"%I%M%P\").strftime(\"%l:%M %P\").strip).take","    end","    ","    offering = Offering.create(user: prof, days_time: day_time, course: course, section: row[2])","","  rescue","  end","end "]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":0},"end":{"row":43,"column":2},"action":"insert","lines":["  "]},{"start":{"row":44,"column":0},"end":{"row":44,"column":2},"action":"insert","lines":["  "]},{"start":{"row":45,"column":0},"end":{"row":45,"column":2},"action":"insert","lines":["  "]},{"start":{"row":46,"column":0},"end":{"row":46,"column":2},"action":"insert","lines":["  "]},{"start":{"row":47,"column":0},"end":{"row":47,"column":2},"action":"insert","lines":["  "]},{"start":{"row":48,"column":0},"end":{"row":48,"column":2},"action":"insert","lines":["  "]},{"start":{"row":49,"column":0},"end":{"row":49,"column":2},"action":"insert","lines":["  "]},{"start":{"row":50,"column":0},"end":{"row":50,"column":2},"action":"insert","lines":["  "]},{"start":{"row":51,"column":0},"end":{"row":51,"column":2},"action":"insert","lines":["  "]},{"start":{"row":52,"column":0},"end":{"row":52,"column":2},"action":"insert","lines":["  "]},{"start":{"row":53,"column":0},"end":{"row":53,"column":2},"action":"insert","lines":["  "]},{"start":{"row":54,"column":0},"end":{"row":54,"column":2},"action":"insert","lines":["  "]},{"start":{"row":55,"column":0},"end":{"row":55,"column":2},"action":"insert","lines":["  "]},{"start":{"row":56,"column":0},"end":{"row":56,"column":2},"action":"insert","lines":["  "]},{"start":{"row":57,"column":0},"end":{"row":57,"column":2},"action":"insert","lines":["  "]},{"start":{"row":58,"column":0},"end":{"row":58,"column":2},"action":"insert","lines":["  "]},{"start":{"row":59,"column":0},"end":{"row":59,"column":2},"action":"insert","lines":["  "]},{"start":{"row":60,"column":0},"end":{"row":60,"column":2},"action":"insert","lines":["  "]},{"start":{"row":61,"column":0},"end":{"row":61,"column":2},"action":"insert","lines":["  "]},{"start":{"row":62,"column":0},"end":{"row":62,"column":2},"action":"insert","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":0},"end":{"row":43,"column":2},"action":"insert","lines":["  "]},{"start":{"row":44,"column":0},"end":{"row":44,"column":2},"action":"insert","lines":["  "]},{"start":{"row":45,"column":0},"end":{"row":45,"column":2},"action":"insert","lines":["  "]},{"start":{"row":46,"column":0},"end":{"row":46,"column":2},"action":"insert","lines":["  "]},{"start":{"row":47,"column":0},"end":{"row":47,"column":2},"action":"insert","lines":["  "]},{"start":{"row":48,"column":0},"end":{"row":48,"column":2},"action":"insert","lines":["  "]},{"start":{"row":49,"column":0},"end":{"row":49,"column":2},"action":"insert","lines":["  "]},{"start":{"row":50,"column":0},"end":{"row":50,"column":2},"action":"insert","lines":["  "]},{"start":{"row":51,"column":0},"end":{"row":51,"column":2},"action":"insert","lines":["  "]},{"start":{"row":52,"column":0},"end":{"row":52,"column":2},"action":"insert","lines":["  "]},{"start":{"row":53,"column":0},"end":{"row":53,"column":2},"action":"insert","lines":["  "]},{"start":{"row":54,"column":0},"end":{"row":54,"column":2},"action":"insert","lines":["  "]},{"start":{"row":55,"column":0},"end":{"row":55,"column":2},"action":"insert","lines":["  "]},{"start":{"row":56,"column":0},"end":{"row":56,"column":2},"action":"insert","lines":["  "]},{"start":{"row":57,"column":0},"end":{"row":57,"column":2},"action":"insert","lines":["  "]},{"start":{"row":58,"column":0},"end":{"row":58,"column":2},"action":"insert","lines":["  "]},{"start":{"row":59,"column":0},"end":{"row":59,"column":2},"action":"insert","lines":["  "]},{"start":{"row":60,"column":0},"end":{"row":60,"column":2},"action":"insert","lines":["  "]},{"start":{"row":61,"column":0},"end":{"row":61,"column":2},"action":"insert","lines":["  "]},{"start":{"row":62,"column":0},"end":{"row":62,"column":2},"action":"insert","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":0},"end":{"row":43,"column":2},"action":"insert","lines":["  "]},{"start":{"row":44,"column":0},"end":{"row":44,"column":2},"action":"insert","lines":["  "]},{"start":{"row":45,"column":0},"end":{"row":45,"column":2},"action":"insert","lines":["  "]},{"start":{"row":46,"column":0},"end":{"row":46,"column":2},"action":"insert","lines":["  "]},{"start":{"row":47,"column":0},"end":{"row":47,"column":2},"action":"insert","lines":["  "]},{"start":{"row":48,"column":0},"end":{"row":48,"column":2},"action":"insert","lines":["  "]},{"start":{"row":49,"column":0},"end":{"row":49,"column":2},"action":"insert","lines":["  "]},{"start":{"row":50,"column":0},"end":{"row":50,"column":2},"action":"insert","lines":["  "]},{"start":{"row":51,"column":0},"end":{"row":51,"column":2},"action":"insert","lines":["  "]},{"start":{"row":52,"column":0},"end":{"row":52,"column":2},"action":"insert","lines":["  "]},{"start":{"row":53,"column":0},"end":{"row":53,"column":2},"action":"insert","lines":["  "]},{"start":{"row":54,"column":0},"end":{"row":54,"column":2},"action":"insert","lines":["  "]},{"start":{"row":55,"column":0},"end":{"row":55,"column":2},"action":"insert","lines":["  "]},{"start":{"row":56,"column":0},"end":{"row":56,"column":2},"action":"insert","lines":["  "]},{"start":{"row":57,"column":0},"end":{"row":57,"column":2},"action":"insert","lines":["  "]},{"start":{"row":58,"column":0},"end":{"row":58,"column":2},"action":"insert","lines":["  "]},{"start":{"row":59,"column":0},"end":{"row":59,"column":2},"action":"insert","lines":["  "]},{"start":{"row":60,"column":0},"end":{"row":60,"column":2},"action":"insert","lines":["  "]},{"start":{"row":61,"column":0},"end":{"row":61,"column":2},"action":"insert","lines":["  "]},{"start":{"row":62,"column":0},"end":{"row":62,"column":2},"action":"insert","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":17},"end":{"row":43,"column":18},"action":"insert","lines":["="]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":17},"end":{"row":43,"column":18},"action":"remove","lines":["="]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":16},"end":{"row":43,"column":17},"action":"remove","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":15},"end":{"row":43,"column":16},"action":"remove","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":14},"end":{"row":43,"column":15},"action":"remove","lines":["_"]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":0},"end":{"row":44,"column":8},"action":"remove","lines":["        course = prof_id = day_time_id = offering = nil","        "]}]}],[{"group":"doc","deltas":[{"start":{"row":43,"column":0},"end":{"row":44,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":68,"column":0},"end":{"row":88,"column":4},"action":"remove","lines":["CSV.foreach(\"Schedul.csv\") do |row|","  course_id = prof_id = day_time_id = offering = nil","  ","  begin","    course = Course.where(\"subject = ? AND course = ?\",row[1].split()[0].upcase, row[1].split()[1].to_i).take","    prof = User.where(\"email = ?\", row[12].split()[0][0..-2].downcase + '@calu.edu').take","    if row[7].blank?","      if row[2][0].upcase == \"W\"","        day_time = DaysTime.where(\"days = ?\", \"ONLINE\").take","      elsif row[2][0].upcase == \"X\"","        day_time = DaysTime.where(\"days = ?\", \"OFFSITE\").take","      end","    else","      day_time = DaysTime.where(\"days = ? AND start_time = ? and end_time = ? \", row[7].upcase, Time.strptime(row[8], \"%I%M%P\").strftime(\"%l:%M %P\").strip, Time.strptime(row[9], \"%I%M%P\").strftime(\"%l:%M %P\").strip).take","    end","    ","    offering = Offering.create(user: prof, days_time: day_time, course: course, section: row[2])","","  rescue","  end","end "]}]}],[{"group":"doc","deltas":[{"start":{"row":67,"column":3},"end":{"row":68,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":39,"column":4},"end":{"row":39,"column":6},"action":"remove","lines":["# "]}]}],[{"group":"doc","deltas":[{"start":{"row":39,"column":4},"end":{"row":39,"column":6},"action":"insert","lines":["# "]}]}],[{"group":"doc","deltas":[{"start":{"row":39,"column":0},"end":{"row":40,"column":4},"action":"remove","lines":["    # validates_with ClassOverlapOfferingValidator","    "]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":24,"column":3},"action":"remove","lines":["class ClassOverlapOfferingValidator < ActiveModel::Validator","  def validate(offering)","    ","    user = offering.user_id","    if offering.days_time_id != -1 or offering.days_time.days != \"ONLINE\" or offering.days_time.days != \"OFFSITE\"","      start_time_in_q = Time.strptime(offering.days_time.start_time, \"%l:%M %P\")","      end_time_in_q = Time.strptime(offering.days_time.end_time, \"%l:%M %P\")","  ","      days_in_q = offering.days_time.days","      ","      day_time_ar = Offering.where(user_id: user).where.not(days_time: DaysTime.where(days: \"ONLINE\").take.id).where.not(days_time: DaysTime.where(days: \"OFFSITE\").take.id).find_each.collect { |s| [s.days_time.days, s.days_time.start_time, s.days_time.end_time] }","    ","      day_time_ar.each do |off_time|","        start_off_time = Time.strptime(off_time[1], \"%l:%M %P\")","        end_off_time = Time.strptime(off_time[2], \"%l:%M %P\")","  ","        if days_in_q == off_time[0]","          if (start_time_in_q <= end_off_time and start_off_time <=end_time_in_q) ","            offering.errors[:Instructors] << 'cannot teach two classes at the same time'","          end","        end","      end","    end","  end","end"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":29},"end":{"row":18,"column":34},"action":"remove","lines":["email"]},{"start":{"row":18,"column":29},"end":{"row":18,"column":30},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":30},"end":{"row":18,"column":31},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":31},"end":{"row":18,"column":32},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":32},"end":{"row":18,"column":33},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":33},"end":{"row":18,"column":34},"action":"insert","lines":["_"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":34},"end":{"row":18,"column":35},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":35},"end":{"row":18,"column":36},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":36},"end":{"row":18,"column":37},"action":"insert","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":37},"end":{"row":18,"column":38},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":29},"end":{"row":18,"column":30},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":30},"end":{"row":18,"column":31},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":31},"end":{"row":18,"column":32},"action":"insert","lines":["w"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":32},"end":{"row":18,"column":33},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":33},"end":{"row":18,"column":34},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":34},"end":{"row":18,"column":35},"action":"insert","lines":["("]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":44},"end":{"row":18,"column":45},"action":"insert","lines":[")"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":87},"end":{"row":18,"column":100},"action":"remove","lines":["+ '@calu.edu'"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":86},"end":{"row":18,"column":87},"action":"remove","lines":[" "]}]}]]},"ace":{"folds":[],"scrolltop":60,"scrollleft":0,"selection":{"start":{"row":19,"column":26},"end":{"row":19,"column":26},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":3,"state":"start","mode":"ace/mode/ruby"}},"timestamp":1426021486512,"hash":"1ff4cd881727958dc9e9a44df761856abe5d0b9f"}