<% content_for :title do %>
    Editing <%= @course.pretty_course %>
<% end %>

<div class="layout horizontal center-justified">
    <paper-material id="new_course_shadow_div">
        <%= form_for(@course, remote: true) do |f| %>
        
            <paper-input-container id="new-course-subject">
                <%= f.label :subject, "Subject (ex: CSC, CET, etc)"  %>
                <%= f.text_field :subject, is: "iron-input", maxlength: 3 %>
                <paper-input-char-counter></paper-input-char-counter>
                <paper-input-error></paper-input-error>
            </paper-input-container>

            <paper-input-container id="new-course-number">
                <%= f.label :course, "Course Number (ex: 120, 323, etc)"  %>
                <%= f.text_field :course, is: "iron-input", maxlength: 3 %>
                <paper-input-char-counter></paper-input-char-counter>
                <paper-input-error></paper-input-error>
            </paper-input-container>

            <paper-input-container id="new-course-title">
                <%= f.label :title, "Title (ex: Operating Systems)"  %>
                <%= f.text_field :title, is: "iron-input" %>
                <paper-input-error></paper-input-error>
            </paper-input-container>

            <paper-input-container id="new-course-credits">
                <%= f.label :credits, "Credits (Defaults to 3)"  %>
                <%= f.text_field :credits, is: "iron-input" %>
                <paper-input-error></paper-input-error>
            </paper-input-container> 
            
            <div class="layout vertical" style="margin-top:20px;">
                <%= f.label 'Choose Required Prerequisites (if any):', style: "font-size:16px;font-weight:bold;padding-top: 10px;"%>
                
                <%= f.select(:minimum_pt, options_for_select(@pt_options), {include_blank: "No Placement Test Must Be Passed"}) %>

                <%= f.select(:minimum_class_standing, options_for_select(@years), { include_blank: "No minimum class standing"}) %>

                <%= f.select(:minimum_sat_score, options_for_select(@sat_scores), {include_blank: "No minimum SAT score"}) %>
            </div>
            
            <div id="prereq_groups">
                <% @prereqs.each_with_index do |(group_id, prereqs), index| %>
                    <div class="course_prereq_group <%= group_id %> layout vertical">
                        <%= f.label 'Group ' + group_id.to_s + ':' %>
                        <%= f.select(:prerequisites, options_for_select(@courses, prereqs.collect(&:prerequisite_course_id)), {}, { class: "actual_select_courses", multiple: true, size: 6}) %>
                        <br>
                    </div>
                    <% if @prereqs.size > (index +1) %>
                        <div class='layout horizontal center-justified'style='font-size: 16px;font-weight: bold;'> - OR -</div>
                    <% end %>
                <% end %>
    
                <% if @prereqs.blank? %>
                    <div class="course_prereq_group 1 layout vertical">
                        <%= f.label 'Group 1:' %>
                        <%= f.select(:prerequisites, options_for_select(@courses), {}, { class: "actual_select_courses", multiple: true, size: 6}) %>
                        <br>
                    </div>
                <% end %>
            </div>
            
            
            <div class="layout center-justified horizontal" style="color:#4CAF50;">
                <paper-button id="add-or-group">ADD an 'or' group</paper-button>
            </div>

            <div style="width:100%;" id="prereq_min_grades">
                <% min_grades_temp = "" %>
                <% @prereqs.each do |group_id, prereqs| %>
                    <% prereqs.each do |prereq| %>
                        <div class='layout horizontal' style='font-size: 16px;margin-top:5px;margin-bottom:5px;'>
                            <div class='flex course-min-grade'>
                                <%= prereq.prerequisite_course.title %>
                            </div>
                            <div>
                                <%= select_tag(:minimum_grades, options_for_select(["N/A","C", "C-"], prereq.minimum_grade), class: "prereq_grades_dropdown") %>
                            </div>
                        </div>
                        <% min_grades_temp += ((prereq.minimum_grade == nil) ? "N/A" :  prereq.minimum_grade)+ "/|/" %>
                    <% end %>
                <% end %>
            </div>

            <%= text_field_tag :prereq_grades, min_grades_temp, hidden: "" %>
            <%= select_tag(:minimum_grades, options_for_select(['N/A','C', 'C-']), class: 'copy-min-grades', hidden: "" )%>

            
            <br><br><br>
            <div class="layout horizontal end-justified" style="color:#2196F3;">
                <paper-button id="cancel_new_course">Cancel</paper-button>
                <paper-button id="update-course">Update Course</paper-button>
            </div>
        <% end %>
    </paper-material>
</div>