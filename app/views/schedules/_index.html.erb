<div>
    <div class="layout horizontal center-justified" style="margin-top:15px;color:rgba(0,0,0,.87)">
        <table id="advisor_quick_user_courses">
            <% if @signed_up_for.empty? %>
                <tr><th colspan="3">No courses have been signed up for</th></tr>
            <% else %>
                <tr><th colspan="3"><%= @user.email %>'s Courses</th></tr>
                <% total_credits = 0 %>
                <% @signed_up_for.each do |offering| %>
                    <tr>
                      <td><%= offering.course.subject + offering.course.course.to_s + "-" + offering.section + ": " +  offering.course.title %></td>
                      <td style="padding-left:20px;padding-right:20px;"><%= offering.course.credits %></td>
                      <td><%= offering.user.email[0..-10].capitalize %></td>
                    </tr>
                    <% total_credits += offering.course.credits %>
                <% end %>
                <tr id="total_credits_row"><td></td><td style="padding-left:20px;padding-right:20px;border-top: solid thin rgba(0,0,0,.87);"><%= total_credits%></td><td></td></tr>
            <% end %>
        </table>
    </div>
    
    <div class="layout horizontal center-justified" style="margin-bottom:30px;margin-top:10px;" id="sch_approval_div">
        <%= render "schedule_approvals/show" %>
    </div>
    
    
    <div class="layout horizontal center-justified" id="big_schedule_table">
        <paper-material style="background: #fafafa;">
            <table style="margin:15px;border-collapse:separate !important;border-spacing: 11px 3px !important;border:none;" id="schedule_calendar">
                
                <tr style="border:none;">
                    <th></th>
                    <th class="day" style="width:100px;font-size: 14px;">Monday</th>
                    <th class="day" style="width:100px;font-size: 14px;">Tuesday</th>
                    <th class="day" style="width:100px;font-size: 14px;">Wednesday</th>
                    <th class="day" style="width:100px;font-size: 14px;">Thursday</th>
                    <th class="day" style="width:100px;font-size: 14px;">Friday</th>
                </tr>
                
                <% @work_time_slots.each_slice(5) do |slice| %>
                    <tr>
                        <td class="time_slot"><%= slice[0].start_time.strftime("%l:%M%p") %></td>
                        <% slice.each do |time_slot| %>
                            <td data-title="<%= time_slot.start_time.strftime("%l:%M%p") %>" class="day_time_slot <%= time_slot.short_time %> _<%= time_slot.id %> <%= %>" id="_<%= time_slot.id %>"></td>
                        <% end %>
                    </tr>
                <% end %>
            </table>
        </paper-material>
    </div>
</div>

<div id="small_schedule_table" hidden>
    <neon-animated-pages selected="0" id="baluga4" entry-animation="slide-from-right-animation" exit-animation="slide-left-animation">
        <% days_of_week_names = [["Monday","M"], ["Tuesday", "T"], ["Wednesday", "W"], ["Thursday", "R"], ["Friday", "F"]] %>
        <% days_of_week_names.each_with_index do |day_of_week, index| %>
            <section>              
                <div class="layout horizontal center-center">
                    <paper-material style="background: #fafafa;padding-top:7px;padding-bottom:7px;max-width: 370px;margin-right:3.77px;margin-left:3.77px;">
                        <div class="layout horizontal">
                            <% if index != 0 %>
                                <paper-icon-button icon="chevron-left" class="prev_day"></paper-icon-button>
                            <% end %>
                            <h2 class="day layout horizontal center-justified flex"><%= day_of_week[0] %></h2>
                            <% if index != 4 %>
                                <paper-icon-button icon="chevron-right" class="next_day"></paper-icon-button>
                            <% end %>
                        </div>

                        <table style="border-collapse:separate !important;border-spacing: 11px 3px !important;border:none;">
                            <% @work_time_slots.group_by(&:days)[day_of_week[1]].each do |time_slot| %>
                                <tr>
                                    <td class="time_slot"><%= time_slot.start_time.strftime("%l:%M%p") %></td>
                                    <td class="day_time_slot <%= day_of_week[1]%><%= time_slot.start_time.strftime("%l%M%p").strip %> _<%= time_slot.id %>" id="_<%= time_slot.id %>"></td>
                                </tr>
                            <% end %>
                        </table>
                    </paper-material>
                </div>
            </section>
        <% end %>
    </neon-animated-pages>
</div>

<div>
    <div id="remove-work-schedule-div">
        <% @work_schedules.each do |ws| %>
            <%= link_to ws.pretty_day_time, user_work_schedule_path(@user, ws), method: :delete, data: {}, remote: true, class: "work_schedule_" + ws.work_days_time.id.to_s + " delete-work-schedule-link" %>
        <% end %>
    </div>
    <%= form_for [@user, @new_work_schedule], remote: true do |f| %>
        <%= f.collection_select(:work_days_time_id, @work_time_slots, :id, :id) %>
    <% end %>
</div>

<div id="approval_notices"></div>
<iron-media-query id="media_query_schedule" query="(max-width: 750px)"></iron-media-query>

    
<!--JavaScript to make the weekly schedule-->
<script>  
    <% @signed_up_for.each do |offering| %>
        <% if offering.days_time.days != "ONLINE" and offering.days_time.days != "OFFSITE" %>
            <% offering.days_time.days.split("").each do |letter| %>
                <% begin_time = Time.strptime(offering.days_time.start_time, "%l:%M %P") %>
                <% end_time = Time.strptime(offering.days_time.end_time, "%l:%M %P") %>
                <% index = 0 %>
                
                <% if (end_time - 15.minutes).min == 0 or (end_time - 15.minutes).min == 30 %>
                    <% end_time -= 15.minutes %>
                    <% flag = true %>
                <% end %>
                
                <% while begin_time<end_time %>
                    <% if index == 0 %>
                        $(".<%= letter %><%= begin_time.strftime("%l%M%p").strip %>").html("<%= offering.course.subject + offering.course.course.to_s %>" + "<span class='small_schedule_course_title'>: " + "<%= offering.course.title %>"+ "</span>");
                    
                    <% elsif index == 1 %>
                        $(".<%= letter %><%= begin_time.strftime("%l%M%p").strip %>").html("<%= offering.user.email[0..-10].capitalize %>");
                    <% end %>
                    $(".<%= letter %><%= begin_time.strftime("%l%M%p").strip %>").addClass(" selected_class");
                    <% begin_time += 1800 %>
                    <% index += 1 %>
                <% end %>
                <% if flag %>
                   $(".<%= letter %><%= begin_time.strftime("%l%M%p").strip %>").addClass( " half_time_slot");
                <% end %>
            <% end %>
        <% end %>
    <% end %>
</script>