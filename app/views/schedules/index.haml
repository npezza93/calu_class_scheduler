- content_for :title, "Schedule"

.horizontal.wrap.layout.around-justified.mt-3
  .container
    - @incomplete_categories.each do |schedule_category|
      .layout.vertical.center.mx-1
        .mdc-typography--subheading2.w-100
          = schedule_category.curriculum_category.display
        .mdc-card.white.w-100.mb-5
          .mdc-list
            - if schedule_category.offerings.blank?
              .mdc-list-item.danger-text No courses are being offered
            - else
              - schedule_category.offerings.group_by(&:course).each do |course, course_offerings|
                .mdc-list-item= course.pretty_course
                - course_offerings.each do |offering|
                  - if !@schedules.to_a.include? offering
                    = link_to schedules_path(offering_id: offering.id),
                              method: :post, remote: true, class: "mdc-list-item" do
                      = mdc_check_box_tag(nil, "1", false)
                      = offering.display
                  - else
                    = link_to schedule_path(offering), method: :delete, remote: true, class: "mdc-list-item" do
                      = mdc_check_box_tag(nil, "1", false)
            - if schedule_category.courses.present?
              .mdc-list-divider{ role: :separator }
            - schedule_category.courses.each do |course|
              .mdc-list-item
                .mdc-list-item__text= course.pretty_course

  .container
    - @completed_categories.each do |schedule_category|
      .mdc-typography--subheading2.layout.horizontal.start-justified.w-100
        = schedule_category.curriculum_category.display
        .flex
        .success-text Completed
      .mdc-card.white.mb-5
        .mdc-list
          - schedule_category.courses.each do |course|
            .mdc-list-item
              .mdc-list-item__text= course.pretty_course

- unless current_user.schedule_approval
  = link_to user_schedule_approvals_path(current_user),
            method: :post, data: { confirm: "Send to advisor for approval?"} do
    %button.mdl-button.mdl-js-button.mdl-button--fab.edit-fab.fixed
      %i.material-icons check
