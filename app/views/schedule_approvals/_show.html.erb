<% if User.find(session[:user_id]).advisor %>
  <% if session[:user_id] == @user.advised_by and ScheduleApproval.exists?(user: @user, semester: @active_semester) and not ScheduleApproval.where(user: @user, semester: @active_semester).take.approved %>
    <paper-button id="advisor_approve_schedule_button" raised style="background-color:#fafafa;font-weight:bold;"><core-icon style="color:#4CAF50;" icon="check"></core-icon><span style="color:#4CAF50;margin-top:4px;">&nbsp;&nbsp;&nbsp;&nbsp;<%= link_to "Approve Schedule", user_schedule_approval_path(@user, ScheduleApproval.where(user: @user).take), :method => :patch, remote: true, id: 'advisor_approve_schedule_link' %></span></paper-button>
  <% elsif session[:user_id] == @user.advised_by and ScheduleApproval.exists?(user: @user, semester: @active_semester) and ScheduleApproval.where(user: @user, semester: @active_semester).take.approved %>
    <paper-shadow z=0 style="border-radius:3px;padding:10px;background-color:#fafafa;color:#4CAF50;">Schedule Approved</paper-shadow>
  <% end %>

<% else %>

  <% if (not ScheduleApproval.exists?(user: params[:user_id], semester: @active_semester)) and Schedule.where(user_id: @user.id, semester: @active_semester).exists? %>
    <%= form_for [@user, ScheduleApproval.new], remote: true do |f| %>
      <%= f.submit 'submit', hidden: '', id: 'submit_approval_button' %>
      <paper-button raised style="background-color:#fafafa;font-weight:bold;" id="submit_approval_paper_button"><core-icon style="color:#4CAF50;" icon="check"></core-icon><span style="color:#4CAF50;margin-top:4px;">&nbsp;&nbsp;&nbsp;&nbsp;Submit for Approval</span></paper-button>
    <% end %>
  <% elsif ScheduleApproval.exists?(user: params[:user_id], semester: @active_semester) and ScheduleApproval.where(user: params[:user_id], semester: @active_semester).take.approved %>
    <paper-shadow z=0 style="border-radius:3px;padding:10px;background-color:#fafafa;color:#4CAF50;">Schedule Approved</paper-shadow>
  <% elsif ScheduleApproval.exists?(user: params[:user_id], semester: @active_semester) %>
    <paper-shadow z=0 style="border-radius:3px;padding:10px;background-color:#fafafa;color:#e51c23;">Schedule Pending Approval</paper-shadow>
  <% end %>

<% end %>